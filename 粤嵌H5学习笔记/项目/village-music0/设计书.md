# village-music (vue)项目计划书

[toc]

## 设计

### 原则

1. 感谢帮助者

   > 写一个 thank 页面,考虑暂时展示在进入广告页.

   | 名字                                      | 备注                                                         |
   | ----------------------------------------- | ------------------------------------------------------------ |
   | [Binaryify](https://github.com/Binaryify) | 项目:[NeteaseCloudMusicApi](https://neteasecloudmusicapi.vercel.app/#/?id=neteasecloudmusicapi) |
   |                                           |                                                              |
   |                                           |                                                              |

   

2. 功能优先

   > 在时间不足的情况下,功能先于页面效果.

3. 命名:

   - 连接符

     | 连接符    | 适用对象                                                     | 示例                                                         |
     | --------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
     | 短横线`-` | **文件夹名称**\|**html 标签名**\|**css 类名**\|**vue 组件名** | `/village-music`| `<img class="class-name">`|`<vue-comp></vue-copm>` |
     | 下划线`_` | **资源文件**                                                 | bg_red.jpg                                                   |
     | 驼峰式    | **变量**                                                     | `let valName = 'foo';`                                       |

   - 其他

     - 组件名首字母大写
     - ...

4. 报错

   > 不允许不必要的控制台报错.尽量将报错信息处理在函数内:函数应先考虑变量空的情况(=>函数默认参数值可解决此问题);有网络请求的组件,必须处理失败的情况.

5. 网络请求在控制台输出结果,方便调试.格式为 `console.log('请求方式 接口',res)`

6. ...



### 优化

1. 资源加载方式

   - 路由跳转且数据量加载大的视图,在路由守卫(`beforeRouteEnter`,`beforeRouteUpdate`,`beforeRouteLeave`)里处理.处理过程中,在离开的页面里通过 Leaving 组件提供反馈
   - 懒加载网络资源的组件,在组件生命周期(`created`或 `mounted`)里获取数据,通过 Loading 组件提供反馈

2. 防抖

   > 某些网络请求(本项目中只有搜索页面)需要做好防抖处理.

3. 缓存资源

   - 组件可以通过 <keep-alive></keep-alive> 标签缓存资源
   - ...

4. 图片请求附带尺寸参数 `?param=50y50`或 `?imageView=1&type=webp&thumbnail=60x0`

### 接口测试

测试可用的音乐接口,详见 postman 对应的文件

### 项目主体结构

#### 业务结构

##### 音乐功能

- 公共
  - 热门
    - 歌单
    - 歌曲
    - 电台
    - 视频
  - 搜索
  - 
- 登录
  - 推荐
    - 歌单
    - 歌曲
    - 电台
    - 视频
  - 

##### 拓展功能

1. 广告(首屏,首页轮播图,其他页面静态图片)

#### 代码结构

- 应用
  - 搜索
- 页面

- 公共组件

  |   组件名   |             功能             | 备注                                      |
  | :--------: | :--------------------------: | ----------------------------------------- |
  |  **Top**   |           返回顶部           | 自动隐藏,用到了原生 DOM 的事件监听        |
  |  **Cell**  |    左中右结构的横向单元格    | 可选功能:路由跳转,显示序号,添加额外的内容 |
  |  **Card**  |     文字+图片上下式卡片      | 可选功能:路由跳转,右侧徽章,左上角信息,    |
  |  **Part**  |    头部标题带有样式的组件    | 可选功能:路由跳转,                        |
  | **Loding** |      (非弹出层)加载组件      | 可调整尺寸                                |
  | **Poster** | 具有虚幻背景的基础详情页海报 | 可选功能:(可跳转的)滚动弹幕组(在右下方)   |
  |            |                              |                                           |

  

- 



### 主题风格

#### 梗概

> 主题关键字为"**村**",主题色为**黄绿蓝**(三色分别代表**土地**,**植物**和**天空**),图标风格设定为花木.

#### 关于村

#### 颜色表

|    色名     |  hex 值  |
| :---------: | :------: |
|  主题色-黄  | #d99d65  |
|  主题色-绿  | #9cc29b  |
|  主题色-蓝  | #98b09b  |
|   配色-粉   | #d69698  |
|   配色-红   | #ec4141  |
|   配色-紫   | #9d7195  |
|   配色-绿   | #accf95  |
|   配色-橘   | \#fd6f4d |
|  背景色-灰  | #fcfcfd  |
| 背景色-深灰 | \#f6f6f8 |
|  背景色-蓝  | #ceddf3  |
|  背景色-黑  | #1f3232  |
|   字体灰    | #888888  |
|   线条-灰   | #ebebeb  |

图标来源

-  [阿里图标库](https://www.iconfont.cn/) 
- 

### 技术框架

#### 框架 [vue](https://cn.vuejs.org/)

#### 基础

| 名称                                                         | 安装           | 备注                                                     |
| ------------------------------------------------------------ | -------------- | -------------------------------------------------------- |
| [vue-router](https://router.vuejs.org/zh/)                   | vue-cli 可配置 | **路由控制**                                             |
| [vuex](https://vuex.vuejs.org/zh/)                           | vue-cli 可配置 | **全局状态管理**                                         |
| [stylus](https://www.zhangxinxu.com/jq/stylus/variables.php) | vue-cli 可配置 | **CSS 预处理语言**.项目中并没有用到其强大的功能,有待学习 |



#### 组件库 [Vant](https://vant-contrib.gitee.io/vant/#/zh-CN/home)

#### 插件 

| 名称                                                         | 安装                                   | 备注                                                         |
| ------------------------------------------------------------ | -------------------------------------- | ------------------------------------------------------------ |
| [axios](https://cn.vuejs.org/v2/cookbook/using-axios-to-consume-apis.html) | 1.`vue add axios -S`2.`npm i axios -S` | **异步请求数据的插件**.方式1适用于快速起步,会自动生成配置文件(/plugins/axios.js),生成并覆盖main.js,注意备份.方式2 可模块化封装 api |
| [day.js](https://dayjs.fenxianglu.cn/)                       | `npm install dayjs --save`             | **一个极简的 js 日期库**                                     |

### 创意

1. 弹幕组件
2. 滑动切换主页路由
3. 